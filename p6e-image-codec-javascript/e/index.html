<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="application/javascript" src="crypto-js.js"></script>
<!--    <script type="application/javascript" src="encrypt.js"></script>-->
<!--    <script type="application/javascript" src="decrypt.js"></script>-->
</head>
<body>

<script>
    const KEY = "12345678123456781234567812345678";
    const IV = "00000000";

     function wordArrayToUint8Array (wordArray) {
        const length = wordArray.words.length;
        const uint8Array = new Uint8Array(length << 2);
        let word, i, offset = 0;
        for (i = 0; i < length; i++) {
            word = wordArray.words[i];
            uint8Array[offset++] = word >> 24;
            uint8Array[offset++] = (word >> 16) & 0xff;
            uint8Array[offset++] = (word >> 8) & 0xff;
            uint8Array[offset++] = word & 0xff;
        }
        return uint8Array;
    }

    function wordArrayToUint8Array2 (array) {
        Math.ceil(array / 4);
    }

    function encrypt(text) {
        const key = CryptoJS.enc.Utf8.parse(KEY);
        const iv = CryptoJS.enc.Utf8.parse(IV);
        const encrypted = CryptoJS.AES.encrypt(text, key, {
            iv,
            mode: CryptoJS.mode.CBC,
            padding: CryptoJS.pad.Pkcs7
        });
        return encrypted;
    }

    function encrypt2(text) {
        const key = CryptoJS.enc.Utf8.parse(KEY);
        const iv = CryptoJS.enc.Utf8.parse(IV);
        const encrypted = CryptoJS.AES.encrypt(text, key, {
            iv,
            mode: CryptoJS.mode.CBC,
            padding: CryptoJS.pad.Pkcs7
        });
        return encrypted.ciphertext.toString(CryptoJS.enc.Base64);
    }

    function decrypt(base64) {
        const key = CryptoJS.enc.Utf8.parse(KEY);
        const iv = CryptoJS.enc.Utf8.parse(IV);
        console.log(base64);
        const encrypted = CryptoJS.AES.decrypt(base64, key, {
            iv,
            mode: CryptoJS.mode.CBC,
            padding: CryptoJS.pad.Pkcs7
        });
        return encrypted.toString(CryptoJS.enc.Utf8);
    }

    console.log(CryptoJS.lib.WordArray.create());
    console.log(encrypt('12345678'));
    console.log(wordArrayToUint8Array(encrypt('12345678').ciphertext));
    console.log(encrypt2('12345678'));
    // c42c5dbf22fcc2802088ebca6dc2fd22
    // console.log(decrypt(encrypt2('123456')));
</script>

</body>
</html>
